import logger from '../utils/logger.js';

/**
 * Intent Classification Service
 * Classifies user messages into different intents/categories
 * Uses simple keyword matching for fast, reliable classification
 */
class IntentClassifier {
  constructor() {
    // Intent definitions with Thai keywords
    this.intents = {
      // à¸ªà¸­à¸šà¸–à¸²à¸¡à¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­
      loan_inquiry: {
        keywords: [
          'à¸à¸¹à¹‰', 'à¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­', 'à¸‚à¸­à¹€à¸‡à¸´à¸™', 'à¸à¸¹à¹‰à¹€à¸‡à¸´à¸™', 'à¸¢à¸·à¸¡à¹€à¸‡à¸´à¸™',
          'à¸§à¸‡à¹€à¸‡à¸´à¸™', 'à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢', 'à¸­à¸±à¸•à¸£à¸²à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢',
          'KB Personal', 'Pah Pay', 'à¸ˆà¸³à¸™à¸³à¸—à¸°à¹€à¸šà¸µà¸¢à¸™',
          'à¸ªà¸¡à¸±à¸„à¸£', 'à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸à¸¹à¹‰', 'à¸­à¸¢à¸²à¸à¸à¸¹à¹‰',
          'à¹€à¸‡à¸´à¸™à¸à¸¹à¹‰', 'à¸ªà¸¡à¸±à¸„à¸£à¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­'
        ],
        priority: 1,
      },

      // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°
      loan_status: {
        keywords: [
          'à¸ªà¸–à¸²à¸™à¸°', 'à¸œà¸¥', 'à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´', 'à¸›à¸à¸´à¹€à¸ªà¸˜', 'à¸£à¸­à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£',
          'à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š', 'à¹€à¸Šà¹‡à¸„', 'à¹€à¸Šà¹‡à¸„à¸ªà¸–à¸²à¸™à¸°', 'à¸œà¸¥à¸à¸²à¸£à¸žà¸´à¸ˆà¸²à¸£à¸“à¸²',
          'à¸£à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´', 'à¸œà¹ˆà¸²à¸™à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡', 'à¹„à¸”à¹‰à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡',
          'status', 'approved', 'rejected'
        ],
        priority: 1,
      },

      // à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™
      payment: {
        keywords: [
          'à¸Šà¸³à¸£à¸°', 'à¸ˆà¹ˆà¸²à¸¢', 'à¸œà¹ˆà¸­à¸™', 'à¸„à¹ˆà¸²à¸‡à¸§à¸”', 'à¸‡à¸§à¸”',
          'à¸„à¹‰à¸²à¸‡à¸Šà¸³à¸£à¸°', 'à¸„à¹‰à¸²à¸‡à¸ˆà¹ˆà¸²à¸¢', 'à¹€à¸¥à¸¢à¸à¸³à¸«à¸™à¸”', 'à¸Šà¸³à¸£à¸°à¸«à¸™à¸µà¹‰',
          'à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™', 'à¸ˆà¹ˆà¸²à¸¢à¹€à¸‡à¸´à¸™', 'à¸¢à¸­à¸”à¸œà¹ˆà¸­à¸™', 'à¸¢à¸­à¸”à¸„à¹‰à¸²à¸‡',
          'payment', 'pay'
        ],
        priority: 1,
      },

      // à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸šà¸±à¸à¸Šà¸µ
      account_info: {
        keywords: [
          'à¸šà¸±à¸à¸Šà¸µ', 'à¸‚à¹‰à¸­à¸¡à¸¹à¸¥', 'à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ', 'profile',
          'à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥', 'à¸­à¸±à¸žà¹€à¸”à¸—à¸‚à¹‰à¸­à¸¡à¸¹à¸¥', 'à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥',
          'à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£', 'à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ', 'email', 'à¸­à¸µà¹€à¸¡à¸¥'
        ],
        priority: 2,
      },

      // à¸£à¹‰à¸­à¸‡à¹€à¸£à¸µà¸¢à¸™/à¸›à¸±à¸à¸«à¸²
      complaint: {
        keywords: [
          'à¸£à¹‰à¸­à¸‡à¹€à¸£à¸µà¸¢à¸™', 'à¸šà¹ˆà¸™', 'à¹à¸¢à¹ˆ', 'à¹„à¸¡à¹ˆà¸žà¸­à¹ƒà¸ˆ', 'à¸œà¸´à¸”à¸žà¸¥à¸²à¸”',
          'à¸›à¸±à¸à¸«à¸²', 'à¹„à¸¡à¹ˆà¹„à¸”à¹‰', 'à¸Šà¹‰à¸²', 'à¸™à¸²à¸™', 'à¹„à¸¡à¹ˆà¸”à¸µ',
          'à¹‚à¸à¸‡', 'à¸«à¸¥à¸­à¸', 'à¹„à¸¡à¹ˆà¸¡à¸µà¸¡à¸²à¸•à¸£à¸à¸²à¸™',
          'complaint', 'problem', 'issue'
        ],
        priority: 1,
      },

      // à¹€à¸­à¸à¸ªà¸²à¸£
      document: {
        keywords: [
          'à¹€à¸­à¸à¸ªà¸²à¸£', 'à¸ªà¹ˆà¸‡à¹€à¸­à¸à¸ªà¸²à¸£', 'à¸­à¸±à¸žà¹‚à¸«à¸¥à¸”', 'à¹à¸™à¸š',
          'à¸ªà¸¥à¸´à¸›à¹€à¸‡à¸´à¸™à¹€à¸”à¸·à¸­à¸™', 'à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™', 'statement',
          'à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰à¸­à¸°à¹„à¸£', 'à¸•à¹‰à¸­à¸‡à¹€à¸•à¸£à¸µà¸¢à¸¡à¸­à¸°à¹„à¸£', 'à¹€à¸­à¸à¸ªà¸²à¸£à¸­à¸°à¹„à¸£à¸šà¹‰à¸²à¸‡'
        ],
        priority: 2,
      },

      // à¸—à¸±à¸à¸—à¸²à¸¢
      greeting: {
        keywords: [
          'à¸ªà¸§à¸±à¸ªà¸”à¸µ', 'à¸«à¸§à¸±à¸”à¸”à¸µ', 'à¸”à¸µà¸ˆà¹‰à¸²', 'à¸”à¸µà¸„à¸£à¸±à¸š', 'à¸”à¸µà¸„à¹ˆà¸°',
          'hello', 'hi', 'hey', 'à¸§à¹ˆà¸²à¹„à¸‡'
        ],
        priority: 3,
      },

      // à¸‚à¸­à¸šà¸„à¸¸à¸“
      thanks: {
        keywords: [
          'à¸‚à¸­à¸šà¸„à¸¸à¸“', 'à¸‚à¸­à¸šà¹ƒà¸ˆ', 'thank', 'thx', 'à¸„à¹ˆà¸°',
          'à¹‚à¸­à¹€à¸„', 'ok', 'à¹„à¸”à¹‰à¹à¸¥à¹‰à¸§', 'à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¹à¸¥à¹‰à¸§'
        ],
        priority: 3,
      },

      // à¸—à¸±à¹ˆà¸§à¹„à¸› (default)
      general: {
        keywords: [],
        priority: 999,
      },
    };
  }

  /**
   * Classify user message into intent
   * @param {string} message - User message
   * @returns {string} Intent name
   */
  classify(message) {
    if (!message || typeof message !== 'string') {
      return 'general';
    }

    const messageLower = message.toLowerCase().trim();
    const matches = [];

    // Check each intent for keyword matches
    for (const [intent, config] of Object.entries(this.intents)) {
      if (intent === 'general') continue; // Skip general intent

      let matchCount = 0;
      for (const keyword of config.keywords) {
        if (messageLower.includes(keyword.toLowerCase())) {
          matchCount++;
        }
      }

      if (matchCount > 0) {
        matches.push({
          intent,
          matchCount,
          priority: config.priority,
        });
      }
    }

    // If no matches, return general
    if (matches.length === 0) {
      return 'general';
    }

    // Sort by match count DESC, then priority ASC
    matches.sort((a, b) => {
      if (b.matchCount !== a.matchCount) {
        return b.matchCount - a.matchCount;
      }
      return a.priority - b.priority;
    });

    const selectedIntent = matches[0].intent;
    logger.info(`Intent classified: ${selectedIntent} (matches: ${matches[0].matchCount})`);

    return selectedIntent;
  }

  /**
   * Get additional system prompt based on intent
   * @param {string} intent - Intent name
   * @returns {string} Additional prompt
   */
  getIntentPrompt(intent) {
    const prompts = {
      loan_inquiry: `
ðŸŽ¯ **à¹‚à¸Ÿà¸à¸±à¸ªà¸à¸²à¸£à¸•à¸­à¸š**
- à¹à¸™à¸°à¸™à¸³à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œà¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡
- à¸­à¸˜à¸´à¸šà¸²à¸¢à¸§à¸‡à¹€à¸‡à¸´à¸™, à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢, à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚ à¸­à¸¢à¹ˆà¸²à¸‡à¸Šà¸±à¸”à¹€à¸ˆà¸™
- à¹à¸ªà¸”à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¹€à¸•à¸£à¸µà¸¢à¸¡
- à¹ƒà¸«à¹‰à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¸²à¸£à¸ªà¸¡à¸±à¸„à¸£à¸—à¸µà¹ˆà¸¥à¸°à¹€à¸­à¸µà¸¢à¸”
- à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œà¸–à¹‰à¸²à¸¡à¸µà¸«à¸¥à¸²à¸¢à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸`,

      loan_status: `
ðŸŽ¯ **à¹‚à¸Ÿà¸à¸±à¸ªà¸à¸²à¸£à¸•à¸­à¸š**
- à¸­à¸˜à¸´à¸šà¸²à¸¢à¸ªà¸–à¸²à¸™à¸°à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™à¸—à¸µà¹ˆà¸Šà¸±à¸”à¹€à¸ˆà¸™
- à¹à¸ˆà¹‰à¸‡à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸› (à¸–à¹‰à¸²à¸£à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´)
- à¸­à¸˜à¸´à¸šà¸²à¸¢à¸ªà¸²à¹€à¸«à¸•à¸¸ (à¸–à¹‰à¸²à¸–à¸¹à¸à¸›à¸à¸´à¹€à¸ªà¸˜)
- à¹à¸™à¸°à¸™à¸³à¸—à¸²à¸‡à¹€à¸¥à¸·à¸­à¸/à¹à¸™à¸§à¸—à¸²à¸‡à¹à¸à¹‰à¹„à¸‚
- à¹ƒà¸Šà¹‰à¸™à¹‰à¸³à¹€à¸ªà¸µà¸¢à¸‡à¸—à¸µà¹ˆà¹€à¸«à¹‡à¸™à¹ƒà¸ˆà¹à¸¥à¸°à¸ªà¸£à¹‰à¸²à¸‡à¹à¸£à¸‡à¸šà¸±à¸™à¸”à¸²à¸¥à¹ƒà¸ˆ`,

      payment: `
ðŸŽ¯ **à¹‚à¸Ÿà¸à¸±à¸ªà¸à¸²à¸£à¸•à¸­à¸š**
- à¹à¸ˆà¹‰à¸‡à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¸—à¸µà¹ˆà¸Šà¸±à¸”à¹€à¸ˆà¸™
- à¹à¸ªà¸”à¸‡à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- à¸­à¸˜à¸´à¸šà¸²à¸¢à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸‚à¸­à¸‡à¸à¸²à¸£à¸œà¹ˆà¸­à¸™à¸Šà¹‰à¸²
- à¹à¸™à¸°à¸™à¸³à¹à¸œà¸™à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡
- à¸Šà¹ˆà¸§à¸¢à¹à¸à¹‰à¸›à¸±à¸à¸«à¸²à¸„à¹ˆà¸²à¸‡à¸§à¸”à¸–à¹‰à¸²à¸¡à¸µ`,

      account_info: `
ðŸŽ¯ **à¹‚à¸Ÿà¸à¸±à¸ªà¸à¸²à¸£à¸•à¸­à¸š**
- à¸­à¸˜à¸´à¸šà¸²à¸¢à¸§à¸´à¸˜à¸µà¹à¸à¹‰à¹„à¸‚/à¸­à¸±à¸žà¹€à¸”à¸—à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- à¹à¸ˆà¹‰à¸‡à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸—à¸³
- à¸šà¸­à¸à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ (à¸–à¹‰à¸²à¸¡à¸µ)
- à¸¢à¸·à¸™à¸¢à¸±à¸™à¸§à¹ˆà¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸°à¹„à¸”à¹‰à¸£à¸±à¸šà¸à¸²à¸£à¸›à¸à¸›à¹‰à¸­à¸‡`,

      complaint: `
ðŸŽ¯ **à¹‚à¸Ÿà¸à¸±à¸ªà¸à¸²à¸£à¸•à¸­à¸š**
- à¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¹€à¸«à¹‡à¸™à¹ƒà¸ˆà¹à¸¥à¸°à¸£à¸±à¸šà¸Ÿà¸±à¸‡à¸­à¸¢à¹ˆà¸²à¸‡à¸•à¸±à¹‰à¸‡à¹ƒà¸ˆ
- à¸‚à¸­à¹‚à¸—à¸©à¸—à¸µà¹ˆà¸¡à¸µà¸›à¸±à¸à¸«à¸²/à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸°à¸”à¸§à¸
- à¹€à¸ªà¸™à¸­à¸—à¸²à¸‡à¹à¸à¹‰à¹„à¸‚à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸£à¸¹à¸›à¸˜à¸£à¸£à¸¡
- escalate à¹ƒà¸«à¹‰à¹€à¸ˆà¹‰à¸²à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¸œà¸¹à¹‰à¹€à¸Šà¸µà¹ˆà¸¢à¸§à¸Šà¸²à¸
- à¸•à¸´à¸”à¸•à¸²à¸¡à¸œà¸¥à¸«à¸¥à¸±à¸‡à¹à¸à¹‰à¸›à¸±à¸à¸«à¸²`,

      document: `
ðŸŽ¯ **à¹‚à¸Ÿà¸à¸±à¸ªà¸à¸²à¸£à¸•à¸­à¸š**
- à¹à¸ªà¸”à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¹€à¸­à¸à¸ªà¸²à¸£à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰à¸„à¸£à¸šà¸–à¹‰à¸§à¸™
- à¸­à¸˜à¸´à¸šà¸²à¸¢à¸§à¸´à¸˜à¸µà¸­à¸±à¸žà¹‚à¸«à¸¥à¸”/à¸ªà¹ˆà¸‡à¹€à¸­à¸à¸ªà¸²à¸£
- à¹à¸ˆà¹‰à¸‡à¸‚à¹‰à¸­à¸à¸³à¸«à¸™à¸”à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸°à¹€à¸­à¸à¸ªà¸²à¸£ (à¹€à¸Šà¹ˆà¸™ à¸•à¹‰à¸­à¸‡à¹„à¸¡à¹ˆà¹€à¸à¸´à¸™ 3 à¹€à¸”à¸·à¸­à¸™)
- à¹à¸™à¸°à¸™à¸³à¸–à¹‰à¸²à¹€à¸­à¸à¸ªà¸²à¸£à¹„à¸¡à¹ˆà¸„à¸£à¸š`,

      greeting: `
ðŸŽ¯ **à¹‚à¸Ÿà¸à¸±à¸ªà¸à¸²à¸£à¸•à¸­à¸š**
- à¸—à¸±à¸à¸—à¸²à¸¢à¸à¸¥à¸±à¸šà¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸›à¹‡à¸™à¸¡à¸´à¸•à¸£à¹à¸¥à¸°à¸­à¸šà¸­à¸¸à¹ˆà¸™
- à¹à¸™à¸°à¸™à¸³à¸•à¸±à¸§à¹€à¸­à¸‡à¸ªà¸±à¹‰à¸™à¹†
- à¸–à¸²à¸¡à¸§à¹ˆà¸²à¸¡à¸µà¸­à¸°à¹„à¸£à¹ƒà¸«à¹‰à¸Šà¹ˆà¸§à¸¢
- à¸ªà¸£à¹‰à¸²à¸‡à¸šà¸£à¸£à¸¢à¸²à¸à¸²à¸¨à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸à¸±à¸™à¹€à¸­à¸‡`,

      thanks: `
ðŸŽ¯ **à¹‚à¸Ÿà¸à¸±à¸ªà¸à¸²à¸£à¸•à¸­à¸š**
- à¸•à¸­à¸šà¸”à¹‰à¸§à¸¢à¸„à¸§à¸²à¸¡à¸¢à¸´à¸™à¸”à¸µ
- à¸–à¸²à¸¡à¸§à¹ˆà¸²à¸¡à¸µà¸­à¸°à¹„à¸£à¹ƒà¸«à¹‰à¸Šà¹ˆà¸§à¸¢à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¹„à¸«à¸¡
- à¸ªà¹ˆà¸‡à¸—à¹‰à¸²à¸¢à¸”à¹‰à¸§à¸¢à¸„à¸§à¸²à¸¡à¸›à¸£à¸°à¸—à¸±à¸šà¹ƒà¸ˆ`,

      general: `
ðŸŽ¯ **à¹‚à¸Ÿà¸à¸±à¸ªà¸à¸²à¸£à¸•à¸­à¸š**
- à¸•à¸­à¸šà¸•à¸²à¸¡à¸„à¸³à¸–à¸²à¸¡à¹‚à¸”à¸¢à¸•à¸£à¸‡
- à¹ƒà¸Šà¹‰à¸„à¸§à¸²à¸¡à¸£à¸¹à¹‰à¸ˆà¸²à¸ system prompt
- à¹ƒà¸«à¹‰à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹à¸¥à¸°à¸„à¸£à¸šà¸–à¹‰à¸§à¸™`,
    };

    return prompts[intent] || prompts.general;
  }

  /**
   * Build enhanced system prompt with intent context
   * @param {string} basePrompt - Base system prompt
   * @param {string} intent - Detected intent
   * @returns {string} Enhanced prompt
   */
  buildEnhancedPrompt(basePrompt, intent) {
    const intentPrompt = this.getIntentPrompt(intent);

    return `${basePrompt}

## à¸šà¸£à¸´à¸šà¸—à¸‚à¸­à¸‡à¸„à¸³à¸–à¸²à¸¡
à¸¥à¸¹à¸à¸„à¹‰à¸²à¸–à¸²à¸¡à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸š: **${this.getIntentDisplayName(intent)}**

${intentPrompt}`;
  }

  /**
   * Get display name for intent (Thai)
   * @param {string} intent - Intent name
   * @returns {string} Display name
   */
  getIntentDisplayName(intent) {
    const displayNames = {
      loan_inquiry: 'à¸à¸²à¸£à¸ªà¸­à¸šà¸–à¸²à¸¡à¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­',
      loan_status: 'à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°à¸ªà¸´à¸™à¹€à¸Šà¸·à¹ˆà¸­',
      payment: 'à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™',
      account_info: 'à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸šà¸±à¸à¸Šà¸µ',
      complaint: 'à¸£à¹‰à¸­à¸‡à¹€à¸£à¸µà¸¢à¸™/à¸›à¸±à¸à¸«à¸²',
      document: 'à¹€à¸­à¸à¸ªà¸²à¸£',
      greeting: 'à¸—à¸±à¸à¸—à¸²à¸¢',
      thanks: 'à¸‚à¸­à¸šà¸„à¸¸à¸“',
      general: 'à¸—à¸±à¹ˆà¸§à¹„à¸›',
    };

    return displayNames[intent] || 'à¸—à¸±à¹ˆà¸§à¹„à¸›';
  }

  /**
   * Get statistics about intent classifier
   * @returns {object} Statistics
   */
  getStats() {
    const totalKeywords = Object.values(this.intents).reduce(
      (sum, intent) => sum + intent.keywords.length,
      0
    );

    return {
      totalIntents: Object.keys(this.intents).length,
      intents: Object.keys(this.intents).reduce((acc, intentName) => {
        acc[intentName] = {
          keywordCount: this.intents[intentName].keywords.length,
          priority: this.intents[intentName].priority,
        };
        return acc;
      }, {}),
      averageKeywordsPerIntent: (totalKeywords / Object.keys(this.intents).length).toFixed(1),
    };
  }
}

// Export singleton instance
export default new IntentClassifier();
